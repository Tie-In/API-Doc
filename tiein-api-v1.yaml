swagger: '2.0'
info:
  title: Tie-In API
  description: Scrum development application
  version: 1.0.0
host: tieinservice.herokuapp.com
schemes:
  - https
basePath: /api
produces:
  - application/json
paths:
  /users:
    post:
      summary: User Types
      description: Create new user (Regist)
      parameters:
      - name: email
        in: query
        description: User' email
        required: true
        type: string
      - name: password
        in: query
        description: User' password
        required: true
        type: string
        format: 8-72 letters
      - name: password_confirmation
        in: query
        description: Password confirmation
        required: true
        type: string
        format: 8-72 letters
      - name: first_name
        in: query
        description: First name
        required: true
        type: string
      - name: last_name
        in: query
        description: Last name
        required: true
        type: string
      - name: username
        in: query
        description: Username
        required: true
        type: string
      - name: birth_date
        in: query
        description: Birth Datte
        required: true
        type: string
        format: (DD/MM/YYYY)
      - name: phone_number
        in: query
        description: Phone number
        required: true
        type: string
      tags:
        - User
      responses:
        '200':
          description: Success
          schema:
            type: object
            description: "User properties with auth_token"

        '422':
          description: Unprocessable entity
          schema:
            type: object
            properties:
              errors:
                type: object
                description: "Error paramters as key"
  /sessions:
    post:
      summary: Sessions
      description: Login
      parameters:
        - name: email
          in: query
          description: Username or email
          required: true
          type: string
        - name: password
          in: query
          description: Longitude component of end location.
          required: true
          type: string
          format: 8-72 letters
      tags:
        - Session
      responses:
        '200':
          description: An array of price estimates by product
          schema:
            type: object
            properties:
              id:
                type: integer
              email:
                type: string
              username:
                type: string
              auth_token:
                type: string
              firstname:
                type: string
              lastname:
                type: string
              birth_date:
                type: string
              phone_number:
                type: string
        '422':
          description: Unprocessable entity
          schema:
            type: object
            properties:
              errors:
                type: object
                description: "Invalid email/username or password"
  /organizations:
    post:
      summary: Organization
      description: Create organization
      parameters:
        - name: Authentication
          in: header
          description: user's auth_token
          required: true
          type: string
        - name: name
          in: query
          description: Organization name
          required: true
          type: string
        - name: description
          in: query
          description: Organization description
          required: true
          type: string
      tags:
        - Organization
      responses:
        '200':
          description: success
          schema:
            type: object
            properties:
              organization:
                type: object
                description: organization's properties with proejects
              user:
                type: object
                description: current user properties with organizations
        '422':
          description: Unprocessable entity
          schema:
            type: object
            properties:
              errors:
                type: object
                description: "Error paramters as key"
  /organizations/:organizationId:
    get:
      summary: Orgnization information
      description: See organization information and must have permission
      tags:
        - Organization
      parameters:
        - name: Authentication
          in: header
          description: user's auth_token
          required: true
          type: string
      responses:
        '200':
          description: sucess
          schema:
            type: object
            description: organization's information with projects
            properties:
              id:
                type: integer
              projects:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
        '401':
          description: Permission denied
          schema:
            type: object
            properties:
              errors:
                type: string
                description: permission denied
  /projects:
    post:
      summary: Create new project
      parameters:
        - name: Authentication
          in: header
          description: user's auth_token
          required: true
          type: string
        - name: name
          in: query
          description: Project name
          required: true
          type: string
        - name: description
          in: query
          description: Project description
          required: true
          type: string
        - name: organization_id
          in: query
          description: Organization id
          required: true
          type: integer
      tags:
        - Project
      responses:
        '200':
          description: success
          schema:
            type: object
            properties:
              project:
                type: object
                description: project's properties
        '422':
          description: Unprocessable entity
          schema:
            type: object
            properties:
              errors:
                type: object
                description: "Error paramters as key"
  /projects/:projectId:
    get:
      summary: Project information
      description: See project information and must have permission
      tags:
        - Organization
      parameters:
        - name: Authentication
          in: header
          description: user's auth_token
          required: true
          type: string
      responses:
        '200':
          description: sucess
          schema:
            type: object
            description: project's information with features and effort estimation
            properties:
              id:
                type: integer
              features:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
              effort_estimations:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
        '401':
          description: Permission denied
          schema:
            type: object
            properties:
              errors:
                type: string
                description: permission denied
  /effort_estimations:
    post:
      summary: Create new effort estimation for planning
      parameters:
        - name: Authentication
          in: header
          description: user's auth_token
          required: true
          type: string
        - name: effort_estimations
          in: query
          description: effort_estimation info
          required: true
          type: string
          format: object of project_id, t_factor, e_factor, uucp, developers
        - name: features
          in: query
          description: features information
          required: true
          type: string
          format: array of object [name, complexity]
        - name: technicals
          in: query
          description: technical factors
          required: true
          type: string
          format: object
        - name: environmentals
          in: query
          description: environemntal factors
          required: true
          type: string
          format: object
      tags:
        - Effort Estimation
      responses:
        '200':
          description: success
          schema:
            type: object
            properties:
              project_id:
                type: integer
                description: project id
              t_factor:
                type: number
                format: double
                description: techincal factor value
              e_factor:
                type: number
                format: double
                description: environmental factor value
              uucp:
                type: number
                format: double
                description: uucp value
              use_case_point:
                type: number
                format: double
                description: use case points
              lower_weeks:
                type: integer
                description: minimum weeks used
              upper_weeks:
                type: integer
                description: maximum weeks used
        '422':
          description: Unprocessable entity
          schema:
            type: object
            properties:
              errors:
                type: object
                description: "Error paramters as key"
  /effort_estimations/:effort_estimationsId:
    get:
      summary: See effort estimation
      description: See effort estimation  and must have permission
      tags:
        - Effort Estimation
      parameters:
        - name: Authentication
          in: header
          description: user's auth_token
          required: true
          type: string
      responses:
        '200':
          description: sucess
          schema:
            type: object
            description: effort estimations and others planning
            properties:
              effort_estimation:
                type: object
              technical_factor:
                type: object
              environmental_factor:
                type: object
              features:
                type: object
        '401':
          description: Permission denied
          schema:
            type: object
            properties:
              errors:
                type: string
                description: permission denied
